<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${isEdit ? 'Edit Share' : 'New Share'}">Share Form</title>
    <link rel="stylesheet" th:href="@{/css/admin.css}">
</head>
<body>
    <div class="admin-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>üî∑ Delta Sharing OnPrem</h1>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Main</div>
                    <a href="/" class="nav-link">
                        <span class="nav-icon">üìä</span>
                        <span>Dashboard</span>
                    </a>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">Management</div>
                    <a href="/admin/shares" class="nav-link active">
                        <span class="nav-icon">üóÇÔ∏è</span>
                        <span>Shares</span>
                    </a>
                    <a href="/admin/schemas" class="nav-link">
                        <span class="nav-icon">üìÅ</span>
                        <span>Schemas</span>
                    </a>
                    <a href="/admin/tables" class="nav-link">
                        <span class="nav-icon">üìã</span>
                        <span>Tables</span>
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Topbar -->
            <div class="topbar">
                <h2 class="topbar-title" th:text="${isEdit ? 'Edit Share' : 'New Share'}">Share Form</h2>
                <div class="topbar-actions">
                    <a href="/admin/shares" class="btn btn-secondary">
                        ‚Üê Back to List
                    </a>
                </div>
            </div>

            <!-- Content -->
            <div class="content">
                <!-- Error Alert -->
                <div th:if="${errorMessage}" class="alert alert-error">
                    ‚ùå <span th:text="${errorMessage}"></span>
                </div>

                <!-- Form Card -->
                <div class="card" style="max-width: 800px;">
                    <div class="card-header">
                        <h3 class="card-title" th:text="${isEdit ? 'Edit Share Details' : 'Create New Share'}">Share Form</h3>
                    </div>
                    <div class="card-body">
                        <form th:action="${isEdit ? '/admin/shares/' + share.id : '/admin/shares'}" 
                              th:object="${share}" 
                              method="post">
                            
                            <div class="form-group">
                                <label for="name" class="form-label">Name *</label>
                                <input type="text" 
                                       id="name" 
                                       th:field="*{name}" 
                                       class="form-control"
                                       th:classappend="${#fields.hasErrors('name')} ? 'error' : ''"
                                       placeholder="e.g., sales-data"
                                       required>
                                <span th:if="${#fields.hasErrors('name')}" 
                                      th:errors="*{name}" 
                                      class="form-error"></span>
                                <span class="form-help">Unique identifier for this share</span>
                            </div>

                            <div class="form-group">
                                <label for="description" class="form-label">Description</label>
                                <textarea id="description" 
                                          th:field="*{description}" 
                                          class="form-control"
                                          rows="4"
                                          placeholder="Describe what this share contains..."></textarea>
                                <span th:if="${#fields.hasErrors('description')}" 
                                      th:errors="*{description}" 
                                      class="form-error"></span>
                            </div>

                            <div class="form-group">
                                <div class="checkbox-wrapper">
                                    <input type="checkbox" 
                                           id="active"
                                           th:field="*{active}"
                                           th:checked="${share.active == null || share.active}">
                                    <label for="active" class="form-label" style="margin-bottom: 0;">Active</label>
                                </div>
                                <span class="form-help">Enable or disable this share</span>
                            </div>

                            <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                                <button type="submit" class="btn btn-primary">
                                    <span th:text="${isEdit ? 'üíæ Update Share' : '‚ûï Create Share'}">Submit</span>
                                </button>
                                <a href="/admin/shares" class="btn btn-secondary">Cancel</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>
</html>
